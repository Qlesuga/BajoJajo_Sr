const BANNED = [
  "nigg",
  "czarnuch",
  "murzyn",
  "cwel",
  "peda≈Ç",
  "incel",
  "simp",
  "virgin",
  "ciota",
  "incel",
  "kys",
  "kms",
  "onlyfans",
  "anal",
  "fag",
  "nood",
  "gay",
  "rape",
];

const charSubstitutions: Record<string, string> = {
  a: "a–∞·∫°ƒÖ√§√†√°·¥Ä‚Çê·µÉAŒëŒëÃá–ê·é™·óÖÍìÆÍìØÔº°êä†ùêÄùê¥ùë®ùíúùìêùîÑùî∏ùï¨ùñ†ùóîùòàùòºùô∞ùö®ùõ¢ùúúùùñùûê·¥¨¬™…ë«üÍ¨±@",
  b: "b∆Ö·µá·µ¶B∆ÅŒí–í·è¥·èº·ó∑·õí‚Ñ¨ÍìêÍû¥Ôº¢·¥Æ",
  c: "c—Å∆àƒã·¥Ñ·µì·∂úCœπ–°·èüêêï·ëï‚ÑÇ‚Ñ≠‚∏¶ÍìöÔº£êä¢êåÇ‚ÜÑ…îÍúæ",
  d: "d‘Å…ó·∂ÅÍù∫·µàD·é†·óû·ó™·¥Ö‚ÖÖ‚ÖÆÍììÔº§·¥∞",
  e: "e–µ·∫πƒó√©√®‚Çë·µâEŒï–ï·é¨‚¥πÍì∞Ôº•ë¢Æ·¥±…õ…áÍ¨≤",
  f: "f·∂†Fœú·ñ¥‚Ñ±ÍìùÍûòÔº¶êäáêä•Íú∞",
  g: "gƒ°…°÷Å·∂É«•«µ·µçG‚Ñä‚ÖÅÍìñÔºß·¥≥÷Å«µ«•",
  h: "h“ª ∞HŒó–ù·éª·èÇ‚Ñã‚ÑåÍìßÔº®·¥¥",
  i: "i—ñ√≠√Ø‚Å±·µ¢I‚Ö†‚Ö†‚Öº‰∏®Œπ‚Ñê‚Ñë‚à£‚ç≥‚≤í‚µèÍì≤·¥µ1!",
  j: "j—ò ùœ≥ ≤J–à·¥äÍû≤Ôº™·¥∂",
  k: "kŒ∫·µèKŒö–ö·õï‚≤îÍìóÔº´·¥∑ƒ∏ÍùÅ",
  l: "l”è·∏∑À°L‚Ö†‚Öº‚Ñì‚à£‚èΩ‚≤í‚µèÍì≤·¥∏",
  m: "m·µêMŒú–ú·¥ç‚Ñ≥ÍüΩ‚≤òÍìüÔº≠·¥π…±Íüø",
  n: "n’∏‚Åø‚ÇôNŒù’Ü·¥é‚ÑïÍì†ÔºÆ·¥∫≈ã…¥ÍûÉ",
  o: "o–æŒø÷Ö»Ø·ªç·ªè∆°√≥√≤√∂·µí¬∫0OŒü–û’ï‡•¶Íì≥„Äá‚≤û‚≤üÔºØ·¥º",
  p: "p—Ä·µñPŒ°–†‚Ñô‚≤¢ÍìëÔº∞·¥æ",
  q: "q’¶‘õ…ã †·µ†Q‚ÑöÍùñÔº±",
  r: "r–≥·¥¶ ≥RŒì‚Ñõ‚≤¢Íì£Ôº≤·¥ø…º ÅÍùõ",
  s: "s ÇÀ¢S–ÖÍöÇÍôÑÍôÖ‚¥ëÔº≥Íú±≈øÍû©",
  t: "tœÑÍöã·µóTŒ§–¢·¥õ‚≤¶ÍìîÔº¥·µÄ≈ß àÍûá",
  u: "uœÖ’Ω√º√∫√π·µò·µ§U‚à™ùïåùñÄÍì¥Ôºµ·µÅŒºœÖ·¥ú",
  v: "vŒΩ—µ·¥†Íùü·µõV‚à®ùñÅÍì¶Ôº∂‚±Ω å ã",
  w: "w—°‘ù ∑W·¥°Íì™Ôº∑·µÇ…ØœâÍù°",
  x: "x—Ö“≥·∫ãÀ£X√ó‚§´‚§¨‚®ØÍì´Ôº∏",
  y: "y—É√Ω ∏YŒ•“Æ…£Íì¨Ôºπ",
  z: "z ê≈º∆∂·∂ªZ‚Ñ§ÍìúÔº∫",
  "0": "0OoŒüŒø–û–æ’ï„ÄáÍì≥‚≤û‚≤üÔºØùüéùüòùü¢ùü¨‚àÖ‚åÄ‚ì™",
  "1": "1Il…™ÔΩú«Ä‚Ö†‚Öº‚à£ùüèùüôùü£ùü≠·ßöêÑá",
  "2": "2∆ßœ®·íøÍôÑùüêùüöùü§ùüÆ¬≤·íø¬≤·™Ç",
  "3": "3∆∑»ú–ó”†ùüëùüõùü•ùüØ¬≥«´ íÍ£ì",
  "4": "4·èéÔºîùüíùüúùü¶ùü∞·™Ñ·•ä",
  "5": "5∆ºÔºïùüìùüùùüßùü±∆Ω·•ã",
  "6": "6–±·èÆ‚≥íÔºñùüîùüûùü®ùü≤",
  "7": "7êìíÔºóùüïùüüùü©ùü≥êå£êèì",
  "8": "8»¢»£‡ßÆÔºòùüñùü†ùü™ùü¥Í£ò",
  "9": "9‡ß≠‚≥äÔºôùüóùü°ùü´ùüµ’£Í£ô",
};

function createBannedStringRegex(bannedList: string[]) {
  const patterns = bannedList.map((word) => {
    let pattern = "";

    for (const char of word.toLowerCase()) {
      const charSubstitution = charSubstitutions[char] as string | undefined;
      if (charSubstitution) {
        pattern += charSubstitution;
      } else {
        pattern += `[${char}${char.toUpperCase()}]`;
      }

      pattern += "[\\s\\W]*";
    }

    pattern = pattern.replace(/\[\\s\\W\]\*$/, "");

    return pattern;
  });

  return new RegExp(patterns.join("|"), "i");
}

export function containsBannedString(input: string) {
  const regex = createBannedStringRegex(BANNED);
  return regex.test(input);
}
